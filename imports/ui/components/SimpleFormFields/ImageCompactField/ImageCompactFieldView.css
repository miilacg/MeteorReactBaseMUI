import React, { userState } from 'react'
import ReactDOM from 'react-dom';
import {withStyles} from '@material-ui/core/styles';

import Dialog from '@material-ui/core/Dialog';
import DialogActions from '@material-ui/core/DialogActions';
import DialogContent from '@material-ui/core/DialogContent';
import DialogContentText from '@material-ui/core/DialogContentText';
import DialogTitle from '@material-ui/core/DialogTitle';

import Card from '@material-ui/core/Card';
import CardActionArea from '@material-ui/core/CardActionArea';
import CardActions from '@material-ui/core/CardActions';
import CardContent from '@material-ui/core/CardContent';
import CardMedia from '@material-ui/core/CardMedia';
import Button from '@material-ui/core/Button';

import './ImageCompactFieldStyle.css';

const ImageCompactFieldView = (props) => {

  const initialImageData = { image: props.image || "", openImage: false };

  const [ chatImageData, setImageData ] = React.useState(initialImageData);

  const handleOpenImage = event => {
    const { id, value } = event.currentTarget;
    setImageData({ ...chatImageData, [id]: !value});
  }

  return (
    <>

      <div style={componentStyles.image} className="container__content">
        <div className="container_editor_area">
          <img
            id='openImage'
            value={chatImageData.openImage}
            src={chatImageData.image}
            style={{width:'100%', maxWidth:300, maxHeight:300}}
            onClick={handleOpenImage}
            className="container__editor_view"
          />
        </div>
      </div>

        { chatImageData.openImage ?
            <Dialog id='openImage' value={chatImageData.openImage}
              open={chatImageData.openImage}
              onClose={handleOpenImage}
              aria-labelledby="form-dialog-title"
              className="container_editor_area"
            >
                <DialogTitle id="form-dialog-title">Imagem</DialogTitle>
                <DialogContent className="container__editor_view">

                  {chatImageData.image != ""
                  && (
                    <div>
                      <Card>
                        <CardActionArea>
                          <CardMedia
                            image={chatImageData.image}
                            component="img"
                            src={chatImageData.image}
                            style={{width: '100%', height: '100%'}}
                          />
                          </CardActionArea>
                      </Card>
                    </div>
                    )
                  }
                </DialogContent>
                  <DialogActions>
                    <Button id='openImage' value={chatImageData.openImage} onClick={handleOpenImage} color="primary">
                      Close
                    </Button>
                  </DialogActions>
                </Dialog> : null
        }
    </>
  )
}

export default (ImageCompactFieldView);
